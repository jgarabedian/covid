"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var base="https://covidtracking.com/api/v1/",endpointOptions=[{name:"US Current",value:"us/current.json"},{name:"US Daily",value:"us/daily.json"},{name:"States Current",value:"states/current.json"}],form=document.getElementById("form"),results=document.getElementById("results");function getResults(t){fetch(base+t).then(function(e){return e.json()}).then(function(e){"us/current.json"===t?usCurrent(e[0]):"us/daily.json"===t?usDaily(e):"states/current.json"===t?statesCurrent(e):results.innerHTML="".concat(t)})}function createDropdown(){for(var e=document.getElementById("endpointInput"),t=0;t<endpointOptions.length;t++){var n=endpointOptions[t],a=document.createElement("option");a.textContent=n.name,a.value=n.value,e.appendChild(a)}}function createTable(e,t,n){var a='<table class="table table-hover">';a+="<caption>".concat(n,"</caption>"),a+='<thead><tr class="table-info">';var r,o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;a+='<th scope="col">'.concat(s.name,"</th>")}}catch(e){o.e(e)}finally{o.f()}a+="</tr></thead>",a+='<tbody id="resultsTable">';var c,i=_createForOfIteratorHelper(t);try{for(i.s();!(c=i.n()).done;){var l=c.value;a+="<tr>";var u,d=!0,f=_createForOfIteratorHelper(e);try{for(f.s();!(u=f.n()).done;){var m=u.value;"date"===m.accessor&&(l[m.accessor]=formatDate(l[m.accessor])),a+="<t".concat(d?'h scope="row"':"d",">\n                        ").concat(isNaN(l[m.accessor])?l[m.accessor]:addCommas(l[m.accessor]),"\n                    </t").concat(d?"h":"d",">"),d=!1}}catch(e){f.e(e)}finally{f.f()}a+="</tr>"}}catch(e){i.e(e)}finally{i.f()}return a+="</tbody><table>"}function usDaily(e){results.innerHTML=createTable([{name:"Date",accessor:"date"},{name:"Positive",accessor:"positive"},{name:"Deaths",accessor:"death"},{name:"Death Increase",accessor:"deathIncrease"},{name:"Positive",accessor:"positive"},{name:"Positive Increase",accessor:"positiveIncrease"},{name:"Negative",accessor:"negative"}],e,"US Daily")}function statesCurrent(e){results.innerHTML=createTable([{name:"State",accessor:"state"},{name:"Positive",accessor:"positive"},{name:"Deaths",accessor:"death"},{name:"Hospitalized",accessor:"hospitalizedCurrently"},{name:"Data Quality",accessor:"dataQualityGrade"}],e,"US States current info"),$("#searchState").on("keyup",function(){var e=$(this).val().toLowerCase();$("#resultsTable tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(e))})})}function usCurrent(e){var t='\n        <div class="jumbotron jumbotron-fluid bg-info text-light">\n            <div class="container">\n                <h1 class="display-4">Current US Cases</h1>\n                <p class="lead">Total Deaths: '.concat(addCommas(e.death),'</p>\n                <p class="lead">Positive: ').concat(addCommas(e.positive),'</p>\n                <p class="lead">Currently Hospitalized: ').concat(addCommas(e.hospitalizedCurrently),'</p>\n                <p class="lead">Currently in ICU: ').concat(addCommas(e.inIcuCurrently),'</p>\n                <p class="lead">Currently on Ventilater: ').concat(addCommas(e.onVentilatorCurrently),"</p>\n            </div>\n        </div>\n        ");results.innerHTML=t}function formatDate(e){return e=e.toString(),"".concat(e.substring(0,4),"-").concat(e.substring(4,6),"-").concat(e.substring(6,8))}function addCommas(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}function submit(){"Choose an Endpoint"!==this.elements[0].value&&getResults(this.elements[0].value)}form.onchange=submit,window.onload=function(){this.createDropdown(),this.getResults(this.form.elements[0].value)};