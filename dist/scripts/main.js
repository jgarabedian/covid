"use strict";var base="https://covidtracking.com/api/v1/",endpointOptions=[{name:"US Current",value:"us/current.json"},{name:"US Daily",value:"us/daily.json"},{name:"States Current",value:"states/current.json"}],form=document.getElementById("form"),results=document.getElementById("results");function getResults(n){fetch(base+n).then(function(t){return t.json()}).then(function(t){"us/current.json"===n?usCurrent(t[0]):"us/daily.json"===n?usDaily(t):"states/current.json"===n?statesCurrent(t):results.innerHTML="".concat(n)})}function createDropdown(){for(var t=document.getElementById("endpointInput"),n=0;n<endpointOptions.length;n++){var e=endpointOptions[n],a=document.createElement("option");a.textContent=e.name,a.value=e.value,t.appendChild(a)}}function usDaily(t){var n='\n        <table class="table table-hover">\n        <thead>\n            <tr>\n            <th scope="col">Date</th>\n            <th scope="col">Positive</th>\n            <th scope="col">Deaths</th>\n            <th scope="col">Death Increase</th>\n            </tr>\n        </thead>\n        <tbody id="resultsTable">\n    ',e=t.length;100<e&&(e=100);for(var a=0;a<e;a++){var o=t[a].date.toString();o="".concat(o.substring(0,4),"-").concat(o.substring(4,6),"-").concat(o.substring(6,8)),n+='<tr>\n            <th scope="row">'.concat(o,"</th>\n            <td>").concat(addCommas(t[a].positive),"</td>\n            <td>").concat(addCommas(t[a].death),"</td>\n            <td>").concat(addCommas(t[a].deathIncrease),"</td>\n        </tr>")}n+="</tbody></table>",results.innerHTML=n}function statesCurrent(t){for(var n='\n    <input class="form-control" id="searchState" type="text" placeholder="Search State...">\n        <table class="table table-hover">\n        <thead>\n            <tr>\n            <th scope="col">State</th>\n            <th scope="col">Positive</th>\n            <th scope="col">Deaths</th>\n            <th scope="col">Data Quality</th>\n            </tr>\n        </thead>\n        <tbody id="resultsTable">\n    ',e=0;e<t.length;e++)n+='<tr>\n            <th scope="row">'.concat(t[e].state,"</th>\n            <td>").concat(addCommas(t[e].positive),"</td>\n            <td>").concat(addCommas(t[e].death),"</td>\n            <td>").concat(t[e].dataQualityGrade,"</td>\n        </tr>");n+="</tbody></table>",n+="",results.innerHTML=n,$("#searchState").on("keyup",function(){var t=$(this).val().toLowerCase();$("#resultsTable tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))})})}function usCurrent(t){var n="\n        <h3>Current US Cases</h3>\n        <h5>Total Deaths: ".concat(addCommas(t.death),"</h5>\n        <h5>Positive: ").concat(addCommas(t.positive),"</h5>\n        <h5>Currently Hospitalized: ").concat(addCommas(t.positive),"</h5>\n        <h5>Currently in ICU: ").concat(addCommas(t.inIcuCurrently),"</h5>\n        <h5>Currently on Ventilater: ").concat(addCommas(t.onVentilatorCurrently),"</h5>\n        ");results.innerHTML=n}function addCommas(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):t}function submit(){"Choose an Endpoint"!==this.elements[0].value&&getResults(this.elements[0].value)}form.onchange=submit,window.onload=function(){this.createDropdown()};